<%= render 'layouts/navbar' %>
<body class="bg-dark">
<div class = "jumbotron d-flex align-items-center min-vh-100 bg-dark">
    <div class = "container-fluid p-3 my-4 text-white trans-2">
      <h1 class = "is-size-2 has-text-weight-bold mb-4"><%= current_user.name %>'s Dashboard</h1>
      <% if (current_user.role_id === 2) %>
        <%= render 'stocks/search' %> 
         <%= render 'layouts/messages' %>
      <div class = "content">
        <div id="results">
        </div>
        </br>
        <% if !@tracked_stocks.empty? %>
          <h2>Your Tracked Stocks</h2>
         <div class = "table-responsive-md">
          <table class = "table table-striped table-sm table-dark">
            <thead>
              <tr class="th is-selected is-dark">
                <th scope="col" class="text-center text-white bg-success">Ticker</th>
                <th scope="col" class="text-center text-white">Name</th>
                <th scope="col" class="text-center text-white bg-danger">Stock Price</th>
                <th scope="col" class="text-center text-white bg-primary">Actions</th>
              </tr>
            </thead>
            <tbody>
              <% @tracked_stocks.each do |stock| %>
                <tr>
                  <td class="text-center text-white"><%= stock.ticker %></td>
                  <td class="text-center text-white"><%= stock.name %></td>
                  <td class="text-center text-white">$<%= stock.latest_price %></td>
                  <td class="text-center text-white"><%= link_to 'Remove', user_stock_path(stock), method: :delete, data: {confirm: 'Are you sure?'}, class: "btn btn-danger btndanger" %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
         </div>
        <% end %>
      <% end %>
      </div>
  </div>
  <div class = "container p-3 my-4 text-white trans-2">
    <h2>Top 10 Hottest Stocks Right Now </h2>
    <table class = "table table-sm table-striped table-dark">
       <thead>
         <tr>
            <th scope="col" class="text-center text-white bg-success">Symbol</th>
            <th scope="col" class="text-center text-white">Name</th>
            <th scope="col" class="text-center text-white bg-danger">Price</th>
            <th scope="col" class="text-center text-white">Change</th>
         </tr>
       </thead>
       <tbody>
          <% Stock.market_suggestions.each do |stock| %>
           <tr>
             <td class="text-center text-white"><%= stock.symbol %></td>
             <td class="text-center text-white"><%= stock.company_name %></td>
             <td class="text-center text-white">$<%= stock.iex_realtime_price %>USD</td>
             <td class="text-center text-white"><%= stock.change %></td>
           </tr>
          <% end %> 
       </tbody>
       <table class = "table table-sm table-striped table-dark">
       <thead>
         <tr>
            <th scope="col" class="text-center text-white bg-success">Symbol</th>
            <th scope="col" class="text-center text-white">Delayed</th>
            <th scope="col" class="text-center text-white bg-danger">Low</th>
            <th scope="col" class="text-center text-white bg-primary">High</th>
            <th scope="col" class="text-center text-white">Extended Change</th>
         </tr>
       </thead>
       <tbody>
          <% Stock.market_suggestions.each do |stock| %>
           <tr>
             <td class="text-center text-white"><%= stock.symbol %></td>
             <td class="text-center text-white"><%= stock.delayed_price %></td>
             <td class="text-center text-white"><%= stock.low %></td>
             <td class="text-center text-white"><%= stock.high %></td>
             <td class="text-center text-white"><%= stock.extended_price %></td>
           </tr>
          <% end %> 
       </tbody>
</div>
</body>
